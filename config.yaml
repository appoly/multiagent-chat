# Default configuration - copied to ~/.multiagent-chat/config.yaml on first run
# Edit your local copy at ~/.multiagent-chat/config.yaml, not this file
#
# Multi-Agent Chat Configuration
# Define the agents that will collaborate on challenges

# Agent colors - used in the chat UI
# Default colors cycle through this palette if not specified per-agent
default_agent_colors:
  - "#14f195"  # Mint/Teal
  - "#22d3ee"  # Cyan
  - "#3b82f6"  # Blue
  - "#22c55e"  # Green
  - "#f59e0b"  # Amber
  - "#ff453a"  # Red

# User message styling
user_color: "#94a3b8"  # Slate for user messages

agents:
  - name: "Claude"
    command: "claude"
    args: ['--dangerously-skip-permissions']
    use_pty: true
    color: "#3b82f6"  # Blue for Claude

  - name: "Codex"
    command: "codex"
    args: []
    use_pty: true
    color: "#22c55e"  # Green for Codex

#  - name: "Gemini"
#    # If the command below doesn't work, use `which gemini` to find the path on your system.
#    command: "gemini"
#    use_pty: true
#    color: "#f59e0b"  # Amber for Gemini
#    init_delay_ms: 1500
#    args: ['--yolo']

# Example: Multiple instances of the same agent type
# Useful for having the same model debate from different perspectives
#  - name: "Claude-Alpha"
#    command: "claude"
#    args: ['--dangerously-skip-permissions']
#    use_pty: true
#    color: "#3b82f6"  # Blue
#
#  - name: "Claude-Beta"
#    command: "claude"
#    args: ['--dangerously-skip-permissions']
#    use_pty: true
#    color: "#8b5cf6"  # Purple

# Working directory for chat files (hidden to avoid cluttering projects)
workspace: "./.multiagent-chat"

# Chat file (JSONL format for structured UI rendering)
chat_file: "chat.jsonl"

# Outbox directory (agents write here to send messages)
outbox_dir: "outbox"

# Final plan file name
plan_file: "PLAN_FINAL.md"

# Prompts section
prompts:
  # Sent when user clicks "Start Implementing" and selects an agent
  # Placeholders: {selected_agent}, {other_agents}
  implementation_handoff: |
    ## üöÄ IMPLEMENTATION STAGE BEGINS

    The planning phase is complete. You are now entering the **IMPLEMENTATION** stage.

    **{selected_agent}**: You are the lead implementer. Please implement the agreed plan now. You may create, modify, and delete files as needed.

    **{other_agents}**: Wait for {selected_agent} to confirm they have completed the implementation. Then review the changes and provide feedback. Iterate together until everyone is satisfied with the result.

# Prompt template for agents
# This is sent via PTY when the session starts
prompt_template: |
  ## Multi-Agent Collaboration Session

  **You are: {agent_name}**

  You are collaborating with: {agent_names}

  ### How This Works

  1. **Messages from other agents will appear in your terminal** - the chat system delivers them to you
  2. **To send a message**, write to `{outbox_file}` using a shell command (see below)
  3. **Stay active** - keep responding to messages until you reach consensus
  4. **When done**, one agent should write the final agreed solution to `{plan_file}`

  You do NOT need to read any chat files - messages come to you automatically.

  ### IMPORTANT: How to Send Messages

  Use a shell command to write to your outbox - this is MUCH faster than using file editing tools:

  ```bash
  cat << 'EOF' > {outbox_file}
  Your message here.
  Can be multiple lines.
  EOF
  ```

  Do NOT use built-in file read/write tools - they are slower. Just use `cat` with a heredoc.

  ### Guidelines

  - **Sign your messages** - Start or end with your name (e.g., "‚Äî {agent_name}") so others know who's speaking
  - Challenge each other's ideas constructively
  - Don't be too agreeable - push for the best solution
  - Wait for responses before sending multiple messages. DO NOT send multiple in a row without good reason
  - Only implement things if the user explicitly asks
  - Explore for yourself rather than relying on the findings of others

  ### Finalising: Explicit Agreement Required

  Before writing to `{plan_file}`, you MUST have **explicit agreement from ALL agents**.

  - "No objections" or silence is NOT agreement
  - Each agent must explicitly say they agree with the final solution
  - Use clear language like "I agree with this final version" or "Confirmed, let's go with this"
  - Only after ALL agents have explicitly confirmed should one agent write `{plan_file}`

  ### When to Stop

  Once `{plan_file}` has been written and all agents have confirmed, **STOP RESPONDING**.

  Why? Each message you send triggers other agents to respond, creating an endless loop.
  When the task is done, simply stop - do not send "Done!", "Confirmed!", "Acknowledged!", etc.

  ---

  ## ‚ö†Ô∏è PLANNING STAGE ONLY - DO NOT IMPLEMENT

  This session has two distinct phases:

  1. **PLANNING (current phase)** - Discuss, debate, and agree on a plan. Write the agreed plan to `{plan_file}`. DO NOT write any code or make any changes to the codebase.

  2. **IMPLEMENTATION (later)** - Only begins when the user explicitly says "implement" or "start implementing". Until then, your job is ONLY to plan.

  **You are currently in the PLANNING phase. Do not create, modify, or delete any files except your outbox and `{plan_file}`.**

  ---

  ## Topic to Discuss

  {challenge}

  ---

  **Remember: PLAN ONLY. Do not implement anything yet.**

  Send your opening thoughts now using: cat << 'EOF' > {outbox_file}
