# Multi-Agent Orchestrator Configuration
# Define the agents that will collaborate on challenges

# Agent colors - used in the chat UI
# Default colors cycle through this palette if not specified per-agent
default_agent_colors:
  - "#667eea"  # Purple-blue
  - "#f093fb"  # Pink
  - "#4fd1c5"  # Teal
  - "#f6ad55"  # Orange
  - "#68d391"  # Green
  - "#fc8181"  # Red

# User message styling
user_color: "#a0aec0"  # Gray-blue for user messages

agents:
  - name: "Claude"
    command: "claude"
    args: ['--dangerously-skip-permissions']
    use_pty: true
    color: "#f5a623"  # Orange/amber for Claude

  - name: "Codex"
    command: "codex"
    args: []
    use_pty: true
    color: "#50e3c2"  # Teal/cyan for Codex

#  - name: "Gemini"
#    command: "gemini"
#    use_pty: true
#    color: "#4285f4"  # Google blue
#    init_delay_ms: 3000
#    start_args:
#      - "--yolo"

# Working directory for chat files (hidden to avoid cluttering projects)
workspace: "./.multiagent-chat"

# Chat file (JSONL format for structured UI rendering)
chat_file: "chat.jsonl"

# Outbox directory (agents write here to send messages)
outbox_dir: "outbox"

# Final plan file name
plan_file: "PLAN_FINAL.md"

# Prompts section
prompts:
  # Sent when user clicks "Start Implementing" and selects an agent
  # Placeholders: {selected_agent}, {other_agents}
  implementation_handoff: |
    {selected_agent}, please now implement this plan. {other_agents} please wait for confirmation from {selected_agent} that they have completed the implementation. You should then check the changes, and provide feedback if necessary. Keep iterating together until you are all happy with the implementation.

# Prompt template for agents
# This is sent via PTY when the session starts
prompt_template: |
  ## Multi-Agent Collaboration Session

  You are collaborating with: {agent_names}

  ### How This Works

  1. **Messages from other agents will appear in your terminal** - the orchestrator delivers them to you
  2. **To send a message**, write to `{outbox_file}` using a shell command (see below)
  3. **Stay active** - keep responding to messages until you reach consensus
  4. **When done**, one agent should write the final agreed solution to `PLAN_FINAL.md`

  You do NOT need to read any chat files - messages come to you automatically.

  ### IMPORTANT: How to Send Messages

  Use a shell command to write to your outbox - this is MUCH faster than using file editing tools:

  ```bash
  cat << 'EOF' > {outbox_file}
  Your message here.
  Can be multiple lines.
  EOF
  ```

  Do NOT use built-in file read/write tools - they are slower. Just use `cat` with a heredoc.

  ### Guidelines

  - Challenge each other's ideas constructively
  - Don't be too agreeable - push for the best solution
  - Wait for responses before sending multiple messages
  - Only implement things if the user explicitly asks

  ### Finalizing: Explicit Agreement Required

  Before writing to PLAN_FINAL.md, you MUST have **explicit agreement from ALL agents**.

  - "No objections" or silence is NOT agreement
  - Each agent must explicitly say they agree with the final solution
  - Use clear language like "I agree with this final version" or "Confirmed, let's go with this"
  - Only after ALL agents have explicitly confirmed should one agent write PLAN_FINAL.md

  ### When to Stop

  Once PLAN_FINAL.md has been written and all agents have confirmed, **STOP RESPONDING**.

  Why? Each message you send triggers the other agent to respond, creating an endless loop.
  When the task is done, simply stop - do not send "Done!", "Confirmed!", "Acknowledged!", etc.

  ---

  ## Topic to Discuss

  {challenge}

  ---

  **Send your opening thoughts now using: cat << 'EOF' > {outbox_file}**
